<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hodimlar Platformasi</title>
<style>
:root {
    --primary-color: #1e40af;
    --secondary-color: #2563eb;
    --bg-light: #f4f6f8;
    --bg-dark: #1e1e2f;
    --text-light: #ffffff;
    --text-dark: #1e1e2f;
    --task-done: #28a745;
    --task-overdue: #dc3545;
    --task-pending: #facc15;
}

body {
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background-color: var(--bg-light);
    color: var(--text-dark);
}

header {
    background-color: var(--primary-color);
    color: white;
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:15px 20px;
    position:sticky;
    top:0;
    z-index:10;
}
header h1 {
    margin:0;
    font-size:24px;
}
.theme-toggle {
    background:none;
    border:none;
    font-size:22px;
    cursor:pointer;
}

.controls {
    display:flex;
    gap:10px;
    padding:10px 20px;
}
.controls button {
    padding:6px 12px;
    border:none;
    background-color: var(--secondary-color);
    color:white;
    border-radius:5px;
    cursor:pointer;
    font-size:14px;
}

/* Filters */
.filters {
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    padding:10px 20px;
}
.filters select, .filters input[type="date"] {
    padding:5px;
    border-radius:5px;
    border:1px solid #ccc;
}

/* Employee List */
.employee-list {
    padding:10px 20px;
    display:flex;
    flex-direction:column;
    gap:15px;
}
.employee {
    border-radius:10px;
    background-color:white;
    padding:15px;
    display:flex;
    flex-direction:column;
    gap:10px;
    box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
.employee-header {
    display:flex;
    justify-content:space-between;
    align-items:center;
}
.employee-name {
    font-weight:bold;
    font-size:18px;
}
.employee-info {
    display:flex;
    flex-wrap:wrap;
    gap:15px;
}
.employee-info span {
    background:#e0e7ff;
    padding:5px 10px;
    border-radius:5px;
    font-size:14px;
}
.employee-btns button {
    margin-left:5px;
    padding:4px 8px;
    font-size:13px;
    border-radius:5px;
    border:none;
    cursor:pointer;
}
.employee-btns button.add-task {background-color:#2563eb; color:white;}
.employee-btns button.remove-employee {background-color:#dc3545; color:white;}
.employee-btns button.show-done {background-color:#16a34a; color:white;}

/* Tasks */
.tasks {
    display:flex;
    flex-direction:column;
    gap:5px;
    margin-left:20px;
}
.task {
    border-radius:6px;
    padding:8px 10px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-left:5px solid var(--task-pending);
    background-color:#f9f9f9;
}
.task.done {border-left-color: var(--task-done); background-color:#d1fae5; text-decoration:line-through;}
.task.overdue {border-left-color: var(--task-overdue); background-color:#fca5a5;}
.task span {flex:1;}
.task button {
    margin-left:5px;
    padding:3px 6px;
    font-size:12px;
    cursor:pointer;
    border-radius:4px;
    border:none;
}
.task button.done-btn {background-color:var(--task-done); color:white;}
.task button.edit-btn {background-color:#fbbf24; color:white;}
.task button.move-btn {background-color:#3b82f6; color:white;}

/* Dark theme */
body.dark {
    background-color:var(--bg-dark);
    color:var(--text-light);
}
body.dark .employee {background-color:#2b2b3a; box-shadow:0 2px 6px rgba(0,0,0,0.5);}
body.dark .task {background-color:#3b3b4b;}
body.dark .task.done {background-color:#166534; color:white;}
body.dark .task.overdue {background-color:#991b1b; color:white;}
body.dark .employee-info span {background:#3b82f6; color:white;}
</style>
</head>
<body>

<header>
<h1>Hodimlar bo'yicha ma'lumot</h1>
<button class="theme-toggle" onclick="toggleTheme()">üåô/‚òÄÔ∏è</button>
</header>

<div class="controls">
<button onclick="addEmployee()">Hodim qo'shish</button>
</div>

<div class="filters">
<select id="employeeFilter" onchange="applyFilter()">
<option value="">Hodimni tanlang</option>
</select>
<select id="taskFilter" onchange="applyFilter()">
<option value="">Vazifani tanlang</option>
</select>
<input type="date" id="startDate" onchange="applyFilter()">
<input type="date" id="endDate" onchange="applyFilter()">
</div>

<div class="employee-list" id="employeeList"></div>

<script>
let employees=[];

// Tema
function toggleTheme(){document.body.classList.toggle('dark');}

// Hodim qo'shish
function addEmployee(){
const name=prompt("Hodim ismi va familiyasi:");
if(!name) return;
const location=prompt("Qayerda ishlaydi:");
const position=prompt("Ishlayotgani:");
employees.push({name,location,position,tasks:[],showDone:false});
renderEmployees();
updateEmployeeFilter();
}

// Hodimni o'chirish
function removeEmployee(index){
if(confirm("Hodimni o‚Äòchirilsinmi?")){
employees.splice(index,1);
renderEmployees();
updateEmployeeFilter();
updateTaskFilter();
}}

// Vazifa qo‚Äòshish
function addTask(index){
const taskName=prompt("Vazifa nomi:");
const deadline=prompt("Bajarish muddati (YYYY-MM-DD):");
const location=prompt("Qayerda bajariladi:");
if(taskName && deadline && location){
employees[index].tasks.push({name:taskName,deadline:deadline,location:location,done:false});
renderEmployees();
updateTaskFilter();
}}

// Bajarildi qilish
function markDone(empIndex,taskIndex){
employees[empIndex].tasks[taskIndex].done=true;
renderEmployees();
}

// Taxrirlash
function editTask(empIndex,taskIndex){
const task=employees[empIndex].tasks[taskIndex];
const name=prompt("Vazifa nomi:",task.name);
const deadline=prompt("Bajarish muddati:",task.deadline);
const location=prompt("Qayerda:",task.location);
const done=confirm("Vazifa bajarilganmi? OK = ha, Cancel = yo‚Äòq");
task.name=name || task.name;
task.deadline=deadline || task.deadline;
task.location=location || task.location;
task.done=done;
renderEmployees();
}

// Vazifani boshqa hodimga
function moveTask(empIndex,taskIndex){
const newEmp=prompt("Vazifani qaysi hodimga o‚Äòtkazish?");
const targetIndex=employees.findIndex(e=>e.name.toLowerCase()===newEmp.toLowerCase());
if(targetIndex>=0){
employees[targetIndex].tasks.push(employees[empIndex].tasks[taskIndex]);
employees[empIndex].tasks.splice(taskIndex,1);
renderEmployees();
}else alert("Hodim topilmadi!");
}

// Bajarilgan vazifalarni ko‚Äòrsatish
function toggleDoneTasks(index){
employees[index].showDone=!employees[index].showDone;
renderEmployees();
}

// Filtrlar
function applyFilter(){
const empName=document.getElementById('employeeFilter').value.toLowerCase();
const taskName=document.getElementById('taskFilter').value.toLowerCase();
const start=document.getElementById('startDate').value;
const end=document.getElementById('endDate').value;
const listDiv=document.getElementById('employeeList'); listDiv.innerHTML='';
employees.forEach((emp,index)=>{
if(empName && !emp.name.toLowerCase().includes(empName)) return;
let filteredTasks=emp.tasks.filter(t=>!t.done);
if(taskName) filteredTasks=filteredTasks.filter(t=>t.name.toLowerCase().includes(taskName));
if(start) filteredTasks=filteredTasks.filter(t=>t.deadline>=start);
if(end) filteredTasks=filteredTasks.filter(t=>t.deadline<=end);
listDiv.appendChild(renderEmployee(emp,index,filteredTasks));
});}

// Hodimlarni render qilish
function renderEmployees(){
const listDiv=document.getElementById('employeeList'); listDiv.innerHTML='';
employees.forEach((emp,index)=>{
// Vazifalar filtrlangan
const pendingTasks=emp.tasks.filter(t=>!t.done);
listDiv.appendChild(renderEmployee(emp,index,pendingTasks));
});
updateEmployeeFilter();
updateTaskFilter();
}

// Hodimni render
function renderEmployee(emp,index,tasks){
const div=document.createElement('div'); div.className='employee';
const header=document.createElement('div'); header.className='employee-header';
const nameSpan=document.createElement('span'); nameSpan.className='employee-name';
nameSpan.textContent=emp.name+" ("+emp.position+")";
const btnsDiv=document.createElement('div'); btnsDiv.className='employee-btns';
const addBtn=document.createElement('button'); addBtn.className='add-task'; addBtn.textContent='Vazifa qo‚Äòshish'; addBtn.onclick=()=>addTask(index);
const removeBtn=document.createElement('button'); removeBtn.className='remove-employee'; removeBtn.textContent='O‚Äòchirish'; removeBtn.onclick=()=>removeEmployee(index);
const showDoneBtn=document.createElement('button'); showDoneBtn.className='show-done'; showDoneBtn.textContent=emp.showDone ? 'Bajarilgan vazifalarni yashirish' : 'Bajarilgan vazifalarni ko‚Äòrish'; showDoneBtn.onclick=()=>toggleDoneTasks(index);
btnsDiv.appendChild(addBtn); btnsDiv.appendChild(removeBtn); btnsDiv.appendChild(showDoneBtn);
header.appendChild(nameSpan); header.appendChild(btnsDiv);
div.appendChild(header);

// Hodim info
const infoDiv=document.createElement('div'); infoDiv.className='employee-info';
infoDiv.innerHTML=`<span>Qayerda ishlaydi: ${emp.location}</span><span>Ishlayotgani: ${emp.position}</span>`;
div.appendChild(infoDiv);

// Tasks
const taskDiv=document.createElement('div'); taskDiv.className='tasks';
tasks.forEach((task,tIndex)=>{
const t=document.createElement('div'); t.className='task';
if(task.done) t.classList.add('done');
const now=new Date();
if(!task.done && new Date(task.deadline)<now) t.classList.add('overdue');
const span=document.createElement('span'); span.textContent=`${task.name} | Muddati: ${task.deadline} | ${task.location}`;
const taskBtns=document.createElement('span');
const doneBtn=document.createElement('button'); doneBtn.className='done-btn'; doneBtn.textContent='Bajarildi'; doneBtn.onclick=()=>markDone(index,tIndex);
const editBtn=document.createElement('button'); editBtn.className='edit-btn'; editBtn.textContent='Taxrirlash'; editBtn.onclick=()=>editTask(index,tIndex);
const moveBtn=document.createElement('button'); moveBtn.className='move-btn'; moveBtn.textContent='Boshqa hodimga'; moveBtn.onclick=()=>moveTask(index,tIndex);
taskBtns.appendChild(doneBtn); taskBtns.appendChild(editBtn); taskBtns.appendChild(moveBtn);
t.appendChild(span); t.appendChild(taskBtns);
taskDiv.appendChild(t);
});

// Bajarilgan vazifalar
if(emp.showDone){
const doneTasks=emp.tasks.filter(t=>t.done);
doneTasks.forEach((task,tIndex)=>{
const t=document.createElement('div'); t.className='task done';
const span=document.createElement('span'); span.textContent=`${task.name} | Muddati: ${task.deadline} | ${task.location}`;
const taskBtns=document.createElement('span');
const editBtn=document.createElement('button'); editBtn.className='edit-btn'; editBtn.textContent='Taxrirlash'; editBtn.onclick=()=>editTask(index,emp.tasks.indexOf(task));
taskBtns.appendChild(editBtn);
t.appendChild(span); t.appendChild(taskBtns);
taskDiv.appendChild(t);
});
}

div.appendChild(taskDiv);
return div;
}

// Filtrlarga ma'lumot
function updateEmployeeFilter(){
const filter=document.getElementById('employeeFilter'); const val=filter.value;
filter.innerHTML='<option value="">Hodimni tanlang</option>';
employees.forEach(emp=>{const opt=document.createElement('option'); opt.value=emp.name; opt.textContent=emp.name; filter.appendChild(opt);});
filter.value=val;
}
function updateTaskFilter(){
const filter=document.getElementById('taskFilter'); const val=filter.value;
filter.innerHTML='<option value="">Vazifani tanlang</option>';
const taskSet=new Set();
employees.forEach(emp=>emp.tasks.forEach(t=>taskSet.add(t.name)));
taskSet.forEach(t=>{const opt=document.createElement('option'); opt.value=t; opt.textContent=t; filter.appendChild(opt);});
filter.value=val;
}
</script>
</body>
</html>
